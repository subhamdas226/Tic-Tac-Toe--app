{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { useEffect, useRef } from \"react\";\nimport { Audio } from \"expo-av\";\nimport * as Haptics from \"expo-haptics\";\nimport { useSettings } from \"../contexts/settings-context\";\nfunction useSound() {\n  var _useSettings = useSettings(),\n    settings = _useSettings.settings,\n    saveSetting = _useSettings.saveSetting;\n  var popSoundRef = useRef(null);\n  var popSoundRef2 = useRef(null);\n  var winSoundRef = useRef(null);\n  var lostSoundRef = useRef(null);\n  var drawSoundRef = useRef(null);\n  useEffect(function () {\n    var popSoundObject = new Audio.Sound();\n    var popSoundObject2 = new Audio.Sound();\n    var winSoundObject = new Audio.Sound();\n    var lostSoundObject = new Audio.Sound();\n    var drawSoundObject = new Audio.Sound();\n    var loadSounds = function () {\n      var _ref = _asyncToGenerator(function* () {\n        yield popSoundObject.loadAsync(require(\"../../assets/pop_1.wav\"));\n        yield popSoundObject2.loadAsync(require(\"../../assets/pop_2.wav\"));\n        yield winSoundObject.loadAsync(require(\"../../assets/win.wav\"));\n        yield lostSoundObject.loadAsync(require(\"../../assets/loss.wav\"));\n        yield drawSoundObject.loadAsync(require(\"../../assets/draw.wav\"));\n        popSoundRef.current = popSoundObject;\n        popSoundRef2.current = popSoundObject2;\n        winSoundRef.current = winSoundObject;\n        lostSoundRef.current = lostSoundObject;\n        drawSoundRef.current = drawSoundObject;\n      });\n      return function loadSounds() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    loadSounds();\n    return function () {\n      popSoundObject && popSoundObject.unloadAsync();\n      popSoundObject2 && popSoundObject2.unloadAsync();\n      winSoundObject && winSoundObject.unloadAsync();\n      lostSoundObject && lostSoundObject.unloadAsync();\n      drawSoundObject && drawSoundObject.unloadAsync();\n    };\n  }, []);\n  var playSound = function () {\n    var _ref2 = _asyncToGenerator(function* (sound) {\n      var soundmap = {\n        pop1: popSoundRef,\n        pop2: popSoundRef2,\n        win: winSoundRef,\n        loss: lostSoundRef,\n        draw: drawSoundRef\n      };\n      try {\n        var _soundmap$sound$curre, _soundmap$sound$curre2;\n        var status = yield (_soundmap$sound$curre = soundmap[sound].current) == null ? void 0 : _soundmap$sound$curre.getStatusAsync();\n        status && status.isLoaded && (settings == null ? void 0 : settings.sounds) && ((_soundmap$sound$curre2 = soundmap[sound].current) == null ? void 0 : _soundmap$sound$curre2.replayAsync());\n        if (settings != null && settings.haptics) {\n          switch (sound) {\n            case \"pop1\":\n              break;\n            case \"pop2\":\n              Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n              break;\n            case \"win\":\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n              break;\n            case \"loss\":\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n              break;\n            case \"draw\":\n              Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n              break;\n            default:\n              break;\n          }\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    return function playSound(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return playSound;\n}\nexport default useSound;","map":{"version":3,"names":["useEffect","useRef","Audio","Haptics","useSettings","useSound","_useSettings","settings","saveSetting","popSoundRef","popSoundRef2","winSoundRef","lostSoundRef","drawSoundRef","popSoundObject","Sound","popSoundObject2","winSoundObject","lostSoundObject","drawSoundObject","loadSounds","_ref","_asyncToGenerator","loadAsync","require","current","apply","arguments","unloadAsync","playSound","_ref2","sound","soundmap","pop1","pop2","win","loss","draw","_soundmap$sound$curre","_soundmap$sound$curre2","status","getStatusAsync","isLoaded","sounds","replayAsync","haptics","impactAsync","ImpactFeedbackStyle","Light","notificationAsync","NotificationFeedbackType","Success","Error","Warning","error","console","log","_x"],"sources":["E:/projects/Tic-Tac-Toe--app/src/utils/useSound.tsx"],"sourcesContent":["import { StyleSheet, Text, View } from \"react-native\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { Audio } from \"expo-av\";\r\nimport * as Haptics from \"expo-haptics\";\r\nimport { useSettings } from \"@contexts/settings-context\";\r\n\r\ntype soundType = \"pop1\" | \"pop2\" | \"win\" | \"draw\" | \"loss\";\r\n\r\nfunction useSound(): (sound: soundType) => void {\r\n  const { settings, saveSetting } = useSettings();\r\n  const popSoundRef = useRef<Audio.Sound | null>(null);\r\n  const popSoundRef2 = useRef<Audio.Sound | null>(null);\r\n  const winSoundRef = useRef<Audio.Sound | null>(null);\r\n  const lostSoundRef = useRef<Audio.Sound | null>(null);\r\n  const drawSoundRef = useRef<Audio.Sound | null>(null);\r\n\r\n  useEffect(() => {\r\n    //load our sounds\r\n\r\n    const popSoundObject = new Audio.Sound();\r\n    const popSoundObject2 = new Audio.Sound();\r\n    const winSoundObject = new Audio.Sound();\r\n    const lostSoundObject = new Audio.Sound();\r\n    const drawSoundObject = new Audio.Sound();\r\n\r\n    const loadSounds = async () => {\r\n      await popSoundObject.loadAsync(require(\"@assets/pop_1.wav\"));\r\n      await popSoundObject2.loadAsync(require(\"@assets/pop_2.wav\"));\r\n      await winSoundObject.loadAsync(require(\"@assets/win.wav\"));\r\n      await lostSoundObject.loadAsync(require(\"@assets/loss.wav\"));\r\n      await drawSoundObject.loadAsync(require(\"@assets/draw.wav\"));\r\n      // popSoundObject.replayAsync()\r\n      popSoundRef.current = popSoundObject;\r\n      popSoundRef2.current = popSoundObject2;\r\n      winSoundRef.current = winSoundObject;\r\n      lostSoundRef.current = lostSoundObject;\r\n      drawSoundRef.current = drawSoundObject;\r\n    };\r\n    loadSounds();\r\n\r\n    return () => {\r\n      //unload sounds\r\n      popSoundObject && popSoundObject.unloadAsync();\r\n      popSoundObject2 && popSoundObject2.unloadAsync();\r\n      winSoundObject && winSoundObject.unloadAsync();\r\n      lostSoundObject && lostSoundObject.unloadAsync();\r\n      drawSoundObject && drawSoundObject.unloadAsync();\r\n    };\r\n  }, []);\r\n\r\n  const playSound = async (sound: soundType): Promise<void> => {\r\n    const soundmap = {\r\n      pop1: popSoundRef,\r\n      pop2: popSoundRef2,\r\n      win: winSoundRef,\r\n      loss: lostSoundRef,\r\n      draw: drawSoundRef,\r\n    };\r\n\r\n    try {\r\n      const status = await soundmap[sound].current?.getStatusAsync();\r\n      status &&\r\n        status.isLoaded &&\r\n        settings?.sounds &&\r\n        soundmap[sound].current?.replayAsync();\r\n\r\n      if (settings?.haptics) {\r\n        // soundmap[sound].current?.replayAsync();\r\n\r\n        switch (sound) {\r\n          case \"pop1\":\r\n            break;\r\n\r\n          case \"pop2\":\r\n            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\r\n            break;\r\n\r\n          case \"win\":\r\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\r\n            break;\r\n\r\n          case \"loss\":\r\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\r\n            break;\r\n\r\n          case \"draw\":\r\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return playSound;\r\n}\r\n\r\nexport default useSound;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}